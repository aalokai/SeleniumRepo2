package tests;

import org.testng.Assert;
import org.testng.annotations.Test;

import base.BaseTest;
import pages.HomePage;
import pages.LoginPage;

public class LoginTest extends BaseTest {

    @Test
    public void loginWithValidCredentials() {
        startTest("Home -> My Account -> Login with valid credentials");

        // Navigate to login page
        HomePage home = new HomePage(driver);
        home.openSite();
        home.goToLoginFromMyAccount();

        // Login with your account
        LoginPage login = new LoginPage(driver);
        login.loginWithYourAccount();
        test.info("Entered email and password and clicked login");

        // Simple assertion (you can improve this later)
        String currentUrl = driver.getCurrentUrl();
        Assert.assertTrue(currentUrl.contains("bookswagon") || 
                         currentUrl.contains("account"), 
                         "Login may not have succeeded, current URL: " + currentUrl);
        test.pass("Login completed successfully");
    }
    
    @Test
    public void loginWithValidCredentials() {
        startTest("Login → Search → First Book → Buy Now");

        // Home → Login
        HomePage home = new HomePage(driver);
        home.openSite();
        home.goToLoginFromMyAccount();

        LoginPage login = new LoginPage(driver);
        login.loginWithYourAccount();
        test.info("Logged in successfully");

        // Search "Selenium" (or any book)
        home.searchBook("Selenium");
        test.info("Searched for Selenium books");

        // Click first book and Buy Now
        SearchResultsPage results = new SearchResultsPage(driver);
        results.clickFirstBook();
        test.info("Clicked first book");

        results.clickBuyNowOnFirstBook();
        test.info("Clicked Buy Now on first book");

        test.pass("Reached product page / cart");
    }

    
}
