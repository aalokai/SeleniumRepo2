
package tests;

import static io.restassured.RestAssured.*;
import static org.hamcrest.Matchers.*;
import static io.restassured.module.jsv.JsonSchemaValidator.matchesJsonSchemaInClasspath;

import org.testng.annotations.Test;

import io.restassured.http.ContentType;

public class JsonPlaceholderPutDeleteTests {

    @Test
    public void updatePost_shouldReturn200_andUpdatedTitle_andMatchSchema() {
        baseURI = "https://jsonplaceholder.typicode.com";

        Post updated = new Post();
        updated.setUserId(1);
        updated.setId(1); // updating post with id=1
        updated.setTitle("Updated title via PUT");
        updated.setBody("Updated body via PUT");

        given()
            .log().all()
            .contentType(ContentType.JSON)
            .accept(ContentType.JSON)
            .body(updated)
        .when()
            .put("/posts/{id}", 1)
        .then()
            .log().all()
            .statusCode(200)
            .body("id", equalTo(1))
            .body("title", equalTo("Updated title via PUT"))
            .body(matchesJsonSchemaInClasspath("post-schema.json"));
    }

    @Test
    public void deletePost_shouldReturn200() {
        baseURI = "https://jsonplaceholder.typicode.com";

        given()
            .log().all()
        .when()
            .delete("/posts/{id}", 1)
        .then()
            .log().all()
            .statusCode(200);
    }
}
